{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\n\n// Типы для Telegram WebApp API\n\nexport const useTelegram = () => {\n  _s();\n  var _window$Telegram2;\n  const [webApp, setWebApp] = useState(null);\n  const [user, setUser] = useState(null);\n  const [isReady, setIsReady] = useState(false);\n  useEffect(() => {\n    var _window$Telegram;\n    // Проверяем, что мы в Telegram WebApp\n    if ((_window$Telegram = window.Telegram) !== null && _window$Telegram !== void 0 && _window$Telegram.WebApp) {\n      const tg = window.Telegram.WebApp;\n\n      // Инициализируем WebApp\n      tg.ready();\n      tg.expand();\n      setWebApp(tg);\n      setUser(tg.initDataUnsafe.user || null);\n      setIsReady(true);\n\n      // Настраиваем тему\n      document.body.style.backgroundColor = tg.backgroundColor;\n      document.body.style.color = tg.themeParams.text_color || '#000000';\n\n      // Обработчик закрытия приложения\n      const handleClose = () => {\n        tg.close();\n      };\n\n      // Добавляем обработчик\n      tg.onEvent('backButtonClicked', handleClose);\n      return () => {\n        tg.offEvent('backButtonClicked', handleClose);\n      };\n    } else {\n      // Для разработки - создаем мок данные\n      const mockUser = {\n        id: 123456789,\n        first_name: 'Test',\n        last_name: 'User',\n        username: 'testuser',\n        language_code: 'ru'\n      };\n      setUser(mockUser);\n      setIsReady(true);\n    }\n  }, []);\n\n  // Получение данных пользователя для регистрации\n  const getTelegramData = () => {\n    if (user) {\n      return {\n        id: user.id,\n        first_name: user.first_name,\n        last_name: user.last_name || '',\n        username: user.username || ''\n      };\n    }\n    return null;\n  };\n\n  // Показать главную кнопку\n  const showMainButton = (text, onClick) => {\n    if (webApp) {\n      webApp.MainButton.setText(text);\n      webApp.MainButton.onClick(onClick);\n      webApp.MainButton.show();\n    }\n  };\n\n  // Скрыть главную кнопку\n  const hideMainButton = () => {\n    if (webApp) {\n      webApp.MainButton.hide();\n    }\n  };\n\n  // Показать кнопку \"Назад\"\n  const showBackButton = onClick => {\n    if (webApp) {\n      webApp.BackButton.onClick(onClick);\n      webApp.BackButton.show();\n    }\n  };\n\n  // Скрыть кнопку \"Назад\"\n  const hideBackButton = () => {\n    if (webApp) {\n      webApp.BackButton.hide();\n    }\n  };\n\n  // Тактильная обратная связь\n  const hapticFeedback = {\n    impact: (style = 'medium') => {\n      if (webApp) {\n        webApp.HapticFeedback.impactOccurred(style);\n      }\n    },\n    notification: type => {\n      if (webApp) {\n        webApp.HapticFeedback.notificationOccurred(type);\n      }\n    },\n    selection: () => {\n      if (webApp) {\n        webApp.HapticFeedback.selectionChanged();\n      }\n    }\n  };\n\n  // Закрыть приложение\n  const closeApp = () => {\n    if (webApp) {\n      webApp.close();\n    }\n  };\n  return {\n    webApp,\n    user,\n    isReady,\n    isTelegram: !!((_window$Telegram2 = window.Telegram) !== null && _window$Telegram2 !== void 0 && _window$Telegram2.WebApp),\n    getTelegramData,\n    showMainButton,\n    hideMainButton,\n    showBackButton,\n    hideBackButton,\n    hapticFeedback,\n    closeApp,\n    theme: (webApp === null || webApp === void 0 ? void 0 : webApp.themeParams) || {},\n    colorScheme: (webApp === null || webApp === void 0 ? void 0 : webApp.colorScheme) || 'light'\n  };\n};\n_s(useTelegram, \"JOdGTES8/HNY3S/oBDY2B9sculc=\");","map":{"version":3,"names":["useState","useEffect","useTelegram","_s","_window$Telegram2","webApp","setWebApp","user","setUser","isReady","setIsReady","_window$Telegram","window","Telegram","WebApp","tg","ready","expand","initDataUnsafe","document","body","style","backgroundColor","color","themeParams","text_color","handleClose","close","onEvent","offEvent","mockUser","id","first_name","last_name","username","language_code","getTelegramData","showMainButton","text","onClick","MainButton","setText","show","hideMainButton","hide","showBackButton","BackButton","hideBackButton","hapticFeedback","impact","HapticFeedback","impactOccurred","notification","type","notificationOccurred","selection","selectionChanged","closeApp","isTelegram","theme","colorScheme"],"sources":["C:/Users/admnp/Desktop/Loya/frontends/client/src/hooks/useTelegram.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\n\n// Типы для Telegram WebApp API\ninterface TelegramWebApp {\n  initData: string;\n  initDataUnsafe: {\n    user?: {\n      id: number;\n      first_name: string;\n      last_name?: string;\n      username?: string;\n      language_code?: string;\n    };\n    auth_date: number;\n    hash: string;\n  };\n  version: string;\n  platform: string;\n  colorScheme: 'light' | 'dark';\n  themeParams: {\n    bg_color?: string;\n    text_color?: string;\n    hint_color?: string;\n    link_color?: string;\n    button_color?: string;\n    button_text_color?: string;\n  };\n  isExpanded: boolean;\n  viewportHeight: number;\n  viewportStableHeight: number;\n  headerColor: string;\n  backgroundColor: string;\n  isClosingConfirmationEnabled: boolean;\n  BackButton: {\n    isVisible: boolean;\n    onClick: (callback: () => void) => void;\n    offClick: (callback: () => void) => void;\n    show: () => void;\n    hide: () => void;\n  };\n  MainButton: {\n    text: string;\n    color: string;\n    textColor: string;\n    isVisible: boolean;\n    isActive: boolean;\n    isProgressVisible: boolean;\n    setText: (text: string) => void;\n    onClick: (callback: () => void) => void;\n    offClick: (callback: () => void) => void;\n    show: () => void;\n    hide: () => void;\n    enable: () => void;\n    disable: () => void;\n    showProgress: (leaveActive?: boolean) => void;\n    hideProgress: () => void;\n    setParams: (params: {\n      text?: string;\n      color?: string;\n      text_color?: string;\n      is_active?: boolean;\n      is_visible?: boolean;\n    }) => void;\n  };\n  HapticFeedback: {\n    impactOccurred: (style: 'light' | 'medium' | 'heavy' | 'rigid' | 'soft') => void;\n    notificationOccurred: (type: 'error' | 'success' | 'warning') => void;\n    selectionChanged: () => void;\n  };\n  ready: () => void;\n  expand: () => void;\n  close: () => void;\n  onEvent: (eventType: string, eventHandler: () => void) => void;\n  offEvent: (eventType: string, eventHandler: () => void) => void;\n}\n\ndeclare global {\n  interface Window {\n    Telegram?: {\n      WebApp: TelegramWebApp;\n    };\n  }\n}\n\nexport const useTelegram = () => {\n  const [webApp, setWebApp] = useState<TelegramWebApp | null>(null);\n  const [user, setUser] = useState<TelegramWebApp['initDataUnsafe']['user'] | null>(null);\n  const [isReady, setIsReady] = useState(false);\n\n  useEffect(() => {\n    // Проверяем, что мы в Telegram WebApp\n    if (window.Telegram?.WebApp) {\n      const tg = window.Telegram.WebApp;\n      \n      // Инициализируем WebApp\n      tg.ready();\n      tg.expand();\n      \n      setWebApp(tg);\n      setUser(tg.initDataUnsafe.user || null);\n      setIsReady(true);\n\n      // Настраиваем тему\n      document.body.style.backgroundColor = tg.backgroundColor;\n      document.body.style.color = tg.themeParams.text_color || '#000000';\n\n      // Обработчик закрытия приложения\n      const handleClose = () => {\n        tg.close();\n      };\n\n      // Добавляем обработчик\n      tg.onEvent('backButtonClicked', handleClose);\n\n      return () => {\n        tg.offEvent('backButtonClicked', handleClose);\n      };\n    } else {\n      // Для разработки - создаем мок данные\n      const mockUser = {\n        id: 123456789,\n        first_name: 'Test',\n        last_name: 'User',\n        username: 'testuser',\n        language_code: 'ru'\n      };\n      \n      setUser(mockUser);\n      setIsReady(true);\n    }\n  }, []);\n\n  // Получение данных пользователя для регистрации\n  const getTelegramData = () => {\n    if (user) {\n      return {\n        id: user.id,\n        first_name: user.first_name,\n        last_name: user.last_name || '',\n        username: user.username || ''\n      };\n    }\n    return null;\n  };\n\n  // Показать главную кнопку\n  const showMainButton = (text: string, onClick: () => void) => {\n    if (webApp) {\n      webApp.MainButton.setText(text);\n      webApp.MainButton.onClick(onClick);\n      webApp.MainButton.show();\n    }\n  };\n\n  // Скрыть главную кнопку\n  const hideMainButton = () => {\n    if (webApp) {\n      webApp.MainButton.hide();\n    }\n  };\n\n  // Показать кнопку \"Назад\"\n  const showBackButton = (onClick: () => void) => {\n    if (webApp) {\n      webApp.BackButton.onClick(onClick);\n      webApp.BackButton.show();\n    }\n  };\n\n  // Скрыть кнопку \"Назад\"\n  const hideBackButton = () => {\n    if (webApp) {\n      webApp.BackButton.hide();\n    }\n  };\n\n  // Тактильная обратная связь\n  const hapticFeedback = {\n    impact: (style: 'light' | 'medium' | 'heavy' | 'rigid' | 'soft' = 'medium') => {\n      if (webApp) {\n        webApp.HapticFeedback.impactOccurred(style);\n      }\n    },\n    notification: (type: 'error' | 'success' | 'warning') => {\n      if (webApp) {\n        webApp.HapticFeedback.notificationOccurred(type);\n      }\n    },\n    selection: () => {\n      if (webApp) {\n        webApp.HapticFeedback.selectionChanged();\n      }\n    }\n  };\n\n  // Закрыть приложение\n  const closeApp = () => {\n    if (webApp) {\n      webApp.close();\n    }\n  };\n\n  return {\n    webApp,\n    user,\n    isReady,\n    isTelegram: !!window.Telegram?.WebApp,\n    getTelegramData,\n    showMainButton,\n    hideMainButton,\n    showBackButton,\n    hideBackButton,\n    hapticFeedback,\n    closeApp,\n    theme: webApp?.themeParams || {},\n    colorScheme: webApp?.colorScheme || 'light'\n  };\n};\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;;AAE3C;;AAkFA,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,iBAAA;EAC/B,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGN,QAAQ,CAAwB,IAAI,CAAC;EACjE,MAAM,CAACO,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAAkD,IAAI,CAAC;EACvF,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAE7CC,SAAS,CAAC,MAAM;IAAA,IAAAU,gBAAA;IACd;IACA,KAAAA,gBAAA,GAAIC,MAAM,CAACC,QAAQ,cAAAF,gBAAA,eAAfA,gBAAA,CAAiBG,MAAM,EAAE;MAC3B,MAAMC,EAAE,GAAGH,MAAM,CAACC,QAAQ,CAACC,MAAM;;MAEjC;MACAC,EAAE,CAACC,KAAK,CAAC,CAAC;MACVD,EAAE,CAACE,MAAM,CAAC,CAAC;MAEXX,SAAS,CAACS,EAAE,CAAC;MACbP,OAAO,CAACO,EAAE,CAACG,cAAc,CAACX,IAAI,IAAI,IAAI,CAAC;MACvCG,UAAU,CAAC,IAAI,CAAC;;MAEhB;MACAS,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,eAAe,GAAGP,EAAE,CAACO,eAAe;MACxDH,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACE,KAAK,GAAGR,EAAE,CAACS,WAAW,CAACC,UAAU,IAAI,SAAS;;MAElE;MACA,MAAMC,WAAW,GAAGA,CAAA,KAAM;QACxBX,EAAE,CAACY,KAAK,CAAC,CAAC;MACZ,CAAC;;MAED;MACAZ,EAAE,CAACa,OAAO,CAAC,mBAAmB,EAAEF,WAAW,CAAC;MAE5C,OAAO,MAAM;QACXX,EAAE,CAACc,QAAQ,CAAC,mBAAmB,EAAEH,WAAW,CAAC;MAC/C,CAAC;IACH,CAAC,MAAM;MACL;MACA,MAAMI,QAAQ,GAAG;QACfC,EAAE,EAAE,SAAS;QACbC,UAAU,EAAE,MAAM;QAClBC,SAAS,EAAE,MAAM;QACjBC,QAAQ,EAAE,UAAU;QACpBC,aAAa,EAAE;MACjB,CAAC;MAED3B,OAAO,CAACsB,QAAQ,CAAC;MACjBpB,UAAU,CAAC,IAAI,CAAC;IAClB;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAM0B,eAAe,GAAGA,CAAA,KAAM;IAC5B,IAAI7B,IAAI,EAAE;MACR,OAAO;QACLwB,EAAE,EAAExB,IAAI,CAACwB,EAAE;QACXC,UAAU,EAAEzB,IAAI,CAACyB,UAAU;QAC3BC,SAAS,EAAE1B,IAAI,CAAC0B,SAAS,IAAI,EAAE;QAC/BC,QAAQ,EAAE3B,IAAI,CAAC2B,QAAQ,IAAI;MAC7B,CAAC;IACH;IACA,OAAO,IAAI;EACb,CAAC;;EAED;EACA,MAAMG,cAAc,GAAGA,CAACC,IAAY,EAAEC,OAAmB,KAAK;IAC5D,IAAIlC,MAAM,EAAE;MACVA,MAAM,CAACmC,UAAU,CAACC,OAAO,CAACH,IAAI,CAAC;MAC/BjC,MAAM,CAACmC,UAAU,CAACD,OAAO,CAACA,OAAO,CAAC;MAClClC,MAAM,CAACmC,UAAU,CAACE,IAAI,CAAC,CAAC;IAC1B;EACF,CAAC;;EAED;EACA,MAAMC,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAItC,MAAM,EAAE;MACVA,MAAM,CAACmC,UAAU,CAACI,IAAI,CAAC,CAAC;IAC1B;EACF,CAAC;;EAED;EACA,MAAMC,cAAc,GAAIN,OAAmB,IAAK;IAC9C,IAAIlC,MAAM,EAAE;MACVA,MAAM,CAACyC,UAAU,CAACP,OAAO,CAACA,OAAO,CAAC;MAClClC,MAAM,CAACyC,UAAU,CAACJ,IAAI,CAAC,CAAC;IAC1B;EACF,CAAC;;EAED;EACA,MAAMK,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAI1C,MAAM,EAAE;MACVA,MAAM,CAACyC,UAAU,CAACF,IAAI,CAAC,CAAC;IAC1B;EACF,CAAC;;EAED;EACA,MAAMI,cAAc,GAAG;IACrBC,MAAM,EAAEA,CAAC5B,KAAsD,GAAG,QAAQ,KAAK;MAC7E,IAAIhB,MAAM,EAAE;QACVA,MAAM,CAAC6C,cAAc,CAACC,cAAc,CAAC9B,KAAK,CAAC;MAC7C;IACF,CAAC;IACD+B,YAAY,EAAGC,IAAqC,IAAK;MACvD,IAAIhD,MAAM,EAAE;QACVA,MAAM,CAAC6C,cAAc,CAACI,oBAAoB,CAACD,IAAI,CAAC;MAClD;IACF,CAAC;IACDE,SAAS,EAAEA,CAAA,KAAM;MACf,IAAIlD,MAAM,EAAE;QACVA,MAAM,CAAC6C,cAAc,CAACM,gBAAgB,CAAC,CAAC;MAC1C;IACF;EACF,CAAC;;EAED;EACA,MAAMC,QAAQ,GAAGA,CAAA,KAAM;IACrB,IAAIpD,MAAM,EAAE;MACVA,MAAM,CAACsB,KAAK,CAAC,CAAC;IAChB;EACF,CAAC;EAED,OAAO;IACLtB,MAAM;IACNE,IAAI;IACJE,OAAO;IACPiD,UAAU,EAAE,CAAC,GAAAtD,iBAAA,GAACQ,MAAM,CAACC,QAAQ,cAAAT,iBAAA,eAAfA,iBAAA,CAAiBU,MAAM;IACrCsB,eAAe;IACfC,cAAc;IACdM,cAAc;IACdE,cAAc;IACdE,cAAc;IACdC,cAAc;IACdS,QAAQ;IACRE,KAAK,EAAE,CAAAtD,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEmB,WAAW,KAAI,CAAC,CAAC;IAChCoC,WAAW,EAAE,CAAAvD,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEuD,WAAW,KAAI;EACtC,CAAC;AACH,CAAC;AAACzD,EAAA,CArIWD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}