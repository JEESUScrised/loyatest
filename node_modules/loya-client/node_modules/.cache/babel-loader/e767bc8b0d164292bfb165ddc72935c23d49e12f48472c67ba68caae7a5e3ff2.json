{"ast":null,"code":"import axios from'axios';class ApiClient{constructor(){this.instance=void 0;this.authToken=null;// Определяем базовый URL API\nconst baseURL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';this.instance=axios.create({baseURL,timeout:30000,headers:{'Content-Type':'application/json'}});// Interceptor для добавления токена авторизации\nthis.instance.interceptors.request.use(config=>{if(this.authToken){config.headers.Authorization=\"Bearer \".concat(this.authToken);}return config;},error=>{return Promise.reject(error);});// Interceptor для обработки ответов\nthis.instance.interceptors.response.use(response=>{return response;},error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){// Токен истек или невалиден\nthis.removeAuthToken();window.location.href='/login';}return Promise.reject(error);});}// Установить токен авторизации\nsetAuthToken(token){this.authToken=token;localStorage.setItem('auth_token',token);}// Удалить токен авторизации\nremoveAuthToken(){this.authToken=null;localStorage.removeItem('auth_token');}// Проверить наличие токена\ngetAuthToken(){if(!this.authToken){this.authToken=localStorage.getItem('auth_token');}return this.authToken;}// GET запрос\nasync get(url,config){try{const response=await this.instance.get(url,config);return{success:true,data:response.data.data,message:response.data.message};}catch(error){var _error$response2,_error$response2$data,_error$response3,_error$response3$data;return{success:false,error:((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message||'Ошибка при выполнении запроса',message:((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||error.message||'Ошибка при выполнении запроса'};}}// POST запрос\nasync post(url,data,config){try{const response=await this.instance.post(url,data,config);return{success:true,data:response.data.data||response.data,message:response.data.message};}catch(error){var _error$response4,_error$response4$data,_error$response5,_error$response5$data;return{success:false,error:((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||error.message||'Ошибка при выполнении запроса',message:((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||error.message||'Ошибка при выполнении запроса'};}}// PUT запрос\nasync put(url,data,config){try{const response=await this.instance.put(url,data,config);return{success:true,data:response.data.data,message:response.data.message};}catch(error){var _error$response6,_error$response6$data,_error$response7,_error$response7$data;return{success:false,error:((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.message)||error.message||'Ошибка при выполнении запроса',message:((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.message)||error.message||'Ошибка при выполнении запроса'};}}// DELETE запрос\nasync delete(url,config){try{const response=await this.instance.delete(url,config);return{success:true,data:response.data.data,message:response.data.message};}catch(error){var _error$response8,_error$response8$data,_error$response9,_error$response9$data;return{success:false,error:((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.message)||error.message||'Ошибка при выполнении запроса',message:((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.message)||error.message||'Ошибка при выполнении запроса'};}}}export const apiClient=new ApiClient();","map":{"version":3,"names":["axios","ApiClient","constructor","instance","authToken","baseURL","process","env","REACT_APP_API_URL","create","timeout","headers","interceptors","request","use","config","Authorization","concat","error","Promise","reject","response","_error$response","status","removeAuthToken","window","location","href","setAuthToken","token","localStorage","setItem","removeItem","getAuthToken","getItem","get","url","success","data","message","_error$response2","_error$response2$data","_error$response3","_error$response3$data","post","_error$response4","_error$response4$data","_error$response5","_error$response5$data","put","_error$response6","_error$response6$data","_error$response7","_error$response7$data","delete","_error$response8","_error$response8$data","_error$response9","_error$response9$data","apiClient"],"sources":["C:/Users/admnp/Desktop/Loya/frontends/client/src/services/apiClient.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';\r\n\r\nexport interface ApiResponse<T = any> {\r\n  success: boolean;\r\n  message?: string;\r\n  data?: T;\r\n  error?: string;\r\n}\r\n\r\nclass ApiClient {\r\n  private instance: AxiosInstance;\r\n  private authToken: string | null = null;\r\n\r\n  constructor() {\r\n    // Определяем базовый URL API\r\n    const baseURL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n    \r\n    this.instance = axios.create({\r\n      baseURL,\r\n      timeout: 30000,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    // Interceptor для добавления токена авторизации\r\n    this.instance.interceptors.request.use(\r\n      (config) => {\r\n        if (this.authToken) {\r\n          config.headers.Authorization = `Bearer ${this.authToken}`;\r\n        }\r\n        return config;\r\n      },\r\n      (error) => {\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n\r\n    // Interceptor для обработки ответов\r\n    this.instance.interceptors.response.use(\r\n      (response: AxiosResponse) => {\r\n        return response;\r\n      },\r\n      (error) => {\r\n        if (error.response?.status === 401) {\r\n          // Токен истек или невалиден\r\n          this.removeAuthToken();\r\n          window.location.href = '/login';\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  // Установить токен авторизации\r\n  public setAuthToken(token: string): void {\r\n    this.authToken = token;\r\n    localStorage.setItem('auth_token', token);\r\n  }\r\n\r\n  // Удалить токен авторизации\r\n  public removeAuthToken(): void {\r\n    this.authToken = null;\r\n    localStorage.removeItem('auth_token');\r\n  }\r\n\r\n  // Проверить наличие токена\r\n  public getAuthToken(): string | null {\r\n    if (!this.authToken) {\r\n      this.authToken = localStorage.getItem('auth_token');\r\n    }\r\n    return this.authToken;\r\n  }\r\n\r\n  // GET запрос\r\n  public async get<T = any>(url: string, config?: AxiosRequestConfig): Promise<ApiResponse<T>> {\r\n    try {\r\n      const response = await this.instance.get(url, config);\r\n      return {\r\n        success: true,\r\n        data: response.data.data,\r\n        message: response.data.message,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'Ошибка при выполнении запроса',\r\n        message: error.response?.data?.message || error.message || 'Ошибка при выполнении запроса',\r\n      };\r\n    }\r\n  }\r\n\r\n  // POST запрос\r\n  public async post<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<ApiResponse<T>> {\r\n    try {\r\n      const response = await this.instance.post(url, data, config);\r\n      return {\r\n        success: true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'Ошибка при выполнении запроса',\r\n        message: error.response?.data?.message || error.message || 'Ошибка при выполнении запроса',\r\n      };\r\n    }\r\n  }\r\n\r\n  // PUT запрос\r\n  public async put<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<ApiResponse<T>> {\r\n    try {\r\n      const response = await this.instance.put(url, data, config);\r\n      return {\r\n        success: true,\r\n        data: response.data.data,\r\n        message: response.data.message,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'Ошибка при выполнении запроса',\r\n        message: error.response?.data?.message || error.message || 'Ошибка при выполнении запроса',\r\n      };\r\n    }\r\n  }\r\n\r\n  // DELETE запрос\r\n  public async delete<T = any>(url: string, config?: AxiosRequestConfig): Promise<ApiResponse<T>> {\r\n    try {\r\n      const response = await this.instance.delete(url, config);\r\n      return {\r\n        success: true,\r\n        data: response.data.data,\r\n        message: response.data.message,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'Ошибка при выполнении запроса',\r\n        message: error.response?.data?.message || error.message || 'Ошибка при выполнении запроса',\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nexport const apiClient = new ApiClient();\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}