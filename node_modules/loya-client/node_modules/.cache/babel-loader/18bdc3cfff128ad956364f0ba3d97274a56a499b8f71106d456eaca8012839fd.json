{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admnp\\\\Desktop\\\\Loya\\\\frontends\\\\client\\\\src\\\\components\\\\QRScannerModal.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useApp } from '../contexts/AppContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst QRScannerModal = ({\n  isOpen,\n  onClose,\n  onScan\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const streamRef = useRef(null);\n  const [error, setError] = useState(null);\n  const [isScanning, setIsScanning] = useState(false);\n  const {\n    hapticFeedback\n  } = useApp();\n  useEffect(() => {\n    if (isOpen) {\n      startScanning();\n    } else {\n      stopScanning();\n    }\n    return () => {\n      stopScanning();\n    };\n  }, [isOpen]);\n  const startScanning = async () => {\n    try {\n      setError(null);\n      setIsScanning(true);\n\n      // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'environment' // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–¥–Ω—é—é –∫–∞–º–µ—Ä—É\n        }\n      });\n      streamRef.current = stream;\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        videoRef.current.play();\n\n        // –ù–∞—á–∏–Ω–∞–µ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ\n        scanQRCode();\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ:', err);\n      setError('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.');\n      setIsScanning(false);\n      hapticFeedback.notification('error');\n    }\n  };\n  const stopScanning = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    setIsScanning(false);\n  };\n  const scanQRCode = () => {\n    if (!videoRef.current || !canvasRef.current) return;\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    if (!context) return;\n    const scan = () => {\n      if (video.readyState === video.HAVE_ENOUGH_DATA) {\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n\n        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ QR-–∫–æ–¥–∞\n        // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Ç–∏–ø–∞ jsQR –∏–ª–∏ html5-qrcode\n        try {\n          // –ü–æ–ø—ã—Ç–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ jsQR (–Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: npm install jsqr @types/jsqr)\n          // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä—É—á–Ω–æ–π –≤–≤–æ–¥, –µ—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞\n\n          // –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞\n          // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –≤—ã–∑–æ–≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ jsQR\n          const code = decodeQRFromImageData(imageData);\n          if (code) {\n            hapticFeedback.notification('success');\n            onScan(code);\n            stopScanning();\n            onClose();\n            return;\n          }\n        } catch (err) {\n          // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ\n        }\n      }\n      if (isScanning) {\n        requestAnimationFrame(scan);\n      }\n    };\n    scan();\n  };\n\n  // –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É)\n  const decodeQRFromImageData = imageData => {\n    // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è QR-–∫–æ–¥–∞\n    // –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É jsQR:\n    // npm install jsqr @types/jsqr\n    // import jsQR from 'jsqr';\n    // const code = jsQR(imageData.data, imageData.width, imageData.height);\n    // return code ? code.data : null;\n\n    return null; // –ü–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º null, —Ç–∞–∫ –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      background: 'rgba(0, 0, 0, 0.9)',\n      zIndex: 10000,\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      padding: '20px'\n    },\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%',\n        maxWidth: '400px',\n        background: 'var(--bg-primary)',\n        borderRadius: 'var(--radius-lg)',\n        padding: '20px',\n        position: 'relative'\n      },\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '16px',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0 0 8px 0',\n            color: 'var(--text-primary)',\n            fontSize: '18px',\n            fontWeight: '600'\n          },\n          children: \"\\u0421\\u043A\\u0430\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 QR-\\u043A\\u043E\\u0434\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: '0',\n            color: 'var(--text-secondary)',\n            fontSize: '14px'\n          },\n          children: \"\\u041D\\u0430\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u0430\\u043C\\u0435\\u0440\\u0443 \\u043D\\u0430 QR-\\u043A\\u043E\\u0434\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative',\n          width: '100%',\n          aspectRatio: '1',\n          background: '#000',\n          borderRadius: 'var(--radius-md)',\n          overflow: 'hidden',\n          marginBottom: '16px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          style: {\n            width: '100%',\n            height: '100%',\n            objectFit: 'cover'\n          },\n          playsInline: true,\n          muted: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          style: {\n            display: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            width: '200px',\n            height: '200px',\n            border: '2px solid var(--accent-primary)',\n            borderRadius: 'var(--radius-md)',\n            boxShadow: '0 0 0 9999px rgba(0, 0, 0, 0.5)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'rgba(239, 68, 68, 0.1)',\n          border: '1px solid rgba(239, 68, 68, 0.3)',\n          borderRadius: 'var(--radius-md)',\n          padding: '12px',\n          color: 'var(--error)',\n          fontSize: '14px',\n          marginBottom: '16px',\n          textAlign: 'center'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            stopScanning();\n            onClose();\n          },\n          style: {\n            flex: 1,\n            padding: '12px',\n            background: 'var(--glass-bg)',\n            border: '1px solid var(--glass-border)',\n            borderRadius: 'var(--radius-md)',\n            color: 'var(--text-primary)',\n            fontSize: '16px',\n            fontWeight: '600',\n            cursor: 'pointer'\n          },\n          children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            stopScanning();\n            startScanning();\n          },\n          style: {\n            flex: 1,\n            padding: '12px',\n            background: 'var(--accent-gradient)',\n            border: 'none',\n            borderRadius: 'var(--radius-md)',\n            color: 'var(--bg-primary)',\n            fontSize: '16px',\n            fontWeight: '600',\n            cursor: 'pointer'\n          },\n          children: \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '16px',\n          padding: '12px',\n          background: 'var(--glass-bg)',\n          borderRadius: 'var(--radius-md)',\n          fontSize: '12px',\n          color: 'var(--text-muted)',\n          textAlign: 'center'\n        },\n        children: \"\\uD83D\\uDCA1 \\u0414\\u043B\\u044F \\u043F\\u043E\\u043B\\u043D\\u043E\\u0446\\u0435\\u043D\\u043D\\u043E\\u0433\\u043E \\u0441\\u043A\\u0430\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F \\u0443\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u0435 \\u0431\\u0438\\u0431\\u043B\\u0438\\u043E\\u0442\\u0435\\u043A\\u0443 jsQR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n};\n_s(QRScannerModal, \"XbL7ZjeV5HZZpEf8VmYz/sBuRi8=\", false, function () {\n  return [useApp];\n});\n_c = QRScannerModal;\nexport default QRScannerModal;\nvar _c;\n$RefreshReg$(_c, \"QRScannerModal\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useApp","jsxDEV","_jsxDEV","QRScannerModal","isOpen","onClose","onScan","_s","videoRef","canvasRef","streamRef","error","setError","isScanning","setIsScanning","hapticFeedback","startScanning","stopScanning","stream","navigator","mediaDevices","getUserMedia","video","facingMode","current","srcObject","play","scanQRCode","err","console","notification","getTracks","forEach","track","stop","canvas","context","getContext","scan","readyState","HAVE_ENOUGH_DATA","width","videoWidth","height","videoHeight","drawImage","imageData","getImageData","code","decodeQRFromImageData","requestAnimationFrame","style","position","top","left","right","bottom","background","zIndex","display","flexDirection","alignItems","justifyContent","padding","onClick","children","maxWidth","borderRadius","e","stopPropagation","marginBottom","textAlign","margin","color","fontSize","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","aspectRatio","overflow","ref","objectFit","playsInline","muted","transform","border","boxShadow","gap","flex","cursor","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/admnp/Desktop/Loya/frontends/client/src/components/QRScannerModal.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { Html5Qrcode } from 'html5-qrcode';\r\nimport { useApp } from '../contexts/AppContext';\r\n\r\ninterface QRScannerModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onScan: (code: string) => void;\r\n}\r\n\r\nconst QRScannerModal: React.FC<QRScannerModalProps> = ({ isOpen, onClose, onScan }) => {\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const streamRef = useRef<MediaStream | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const { hapticFeedback } = useApp();\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      startScanning();\r\n    } else {\r\n      stopScanning();\r\n    }\r\n\r\n    return () => {\r\n      stopScanning();\r\n    };\r\n  }, [isOpen]);\r\n\r\n  const startScanning = async () => {\r\n    try {\r\n      setError(null);\r\n      setIsScanning(true);\r\n\r\n      // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        video: {\r\n          facingMode: 'environment' // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–¥–Ω—é—é –∫–∞–º–µ—Ä—É\r\n        }\r\n      });\r\n\r\n      streamRef.current = stream;\r\n\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.play();\r\n        \r\n        // –ù–∞—á–∏–Ω–∞–µ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ\r\n        scanQRCode();\r\n      }\r\n    } catch (err: any) {\r\n      console.error('–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ:', err);\r\n      setError('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.');\r\n      setIsScanning(false);\r\n      hapticFeedback.notification('error');\r\n    }\r\n  };\r\n\r\n  const stopScanning = () => {\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach(track => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n    setIsScanning(false);\r\n  };\r\n\r\n  const scanQRCode = () => {\r\n    if (!videoRef.current || !canvasRef.current) return;\r\n\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext('2d');\r\n\r\n    if (!context) return;\r\n\r\n    const scan = () => {\r\n      if (video.readyState === video.HAVE_ENOUGH_DATA) {\r\n        canvas.width = video.videoWidth;\r\n        canvas.height = video.videoHeight;\r\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\r\n        \r\n        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ QR-–∫–æ–¥–∞\r\n        // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Ç–∏–ø–∞ jsQR –∏–ª–∏ html5-qrcode\r\n        try {\r\n          // –ü–æ–ø—ã—Ç–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ jsQR (–Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: npm install jsqr @types/jsqr)\r\n          // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä—É—á–Ω–æ–π –≤–≤–æ–¥, –µ—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞\r\n          \r\n          // –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞\r\n          // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –≤—ã–∑–æ–≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ jsQR\r\n          const code = decodeQRFromImageData(imageData);\r\n          \r\n          if (code) {\r\n            hapticFeedback.notification('success');\r\n            onScan(code);\r\n            stopScanning();\r\n            onClose();\r\n            return;\r\n          }\r\n        } catch (err) {\r\n          // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ\r\n        }\r\n      }\r\n\r\n      if (isScanning) {\r\n        requestAnimationFrame(scan);\r\n      }\r\n    };\r\n\r\n    scan();\r\n  };\r\n\r\n  // –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É)\r\n  const decodeQRFromImageData = (imageData: ImageData): string | null => {\r\n    // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è QR-–∫–æ–¥–∞\r\n    // –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É jsQR:\r\n    // npm install jsqr @types/jsqr\r\n    // import jsQR from 'jsqr';\r\n    // const code = jsQR(imageData.data, imageData.width, imageData.height);\r\n    // return code ? code.data : null;\r\n    \r\n    return null; // –ü–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º null, —Ç–∞–∫ –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0, 0, 0, 0.9)',\r\n        zIndex: 10000,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: '20px'\r\n      }}\r\n      onClick={onClose}\r\n    >\r\n      <div\r\n        style={{\r\n          width: '100%',\r\n          maxWidth: '400px',\r\n          background: 'var(--bg-primary)',\r\n          borderRadius: 'var(--radius-lg)',\r\n          padding: '20px',\r\n          position: 'relative'\r\n        }}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <div style={{ marginBottom: '16px', textAlign: 'center' }}>\r\n          <h3 style={{\r\n            margin: '0 0 8px 0',\r\n            color: 'var(--text-primary)',\r\n            fontSize: '18px',\r\n            fontWeight: '600'\r\n          }}>\r\n            –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ QR-–∫–æ–¥–∞\r\n          </h3>\r\n          <p style={{\r\n            margin: '0',\r\n            color: 'var(--text-secondary)',\r\n            fontSize: '14px'\r\n          }}>\r\n            –ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ QR-–∫–æ–¥\r\n          </p>\r\n        </div>\r\n\r\n        <div style={{\r\n          position: 'relative',\r\n          width: '100%',\r\n          aspectRatio: '1',\r\n          background: '#000',\r\n          borderRadius: 'var(--radius-md)',\r\n          overflow: 'hidden',\r\n          marginBottom: '16px'\r\n        }}>\r\n          <video\r\n            ref={videoRef}\r\n            style={{\r\n              width: '100%',\r\n              height: '100%',\r\n              objectFit: 'cover'\r\n            }}\r\n            playsInline\r\n            muted\r\n          />\r\n          <canvas\r\n            ref={canvasRef}\r\n            style={{\r\n              display: 'none'\r\n            }}\r\n          />\r\n          \r\n          {/* –†–∞–º–∫–∞ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è */}\r\n          <div style={{\r\n            position: 'absolute',\r\n            top: '50%',\r\n            left: '50%',\r\n            transform: 'translate(-50%, -50%)',\r\n            width: '200px',\r\n            height: '200px',\r\n            border: '2px solid var(--accent-primary)',\r\n            borderRadius: 'var(--radius-md)',\r\n            boxShadow: '0 0 0 9999px rgba(0, 0, 0, 0.5)'\r\n          }} />\r\n        </div>\r\n\r\n        {error && (\r\n          <div style={{\r\n            background: 'rgba(239, 68, 68, 0.1)',\r\n            border: '1px solid rgba(239, 68, 68, 0.3)',\r\n            borderRadius: 'var(--radius-md)',\r\n            padding: '12px',\r\n            color: 'var(--error)',\r\n            fontSize: '14px',\r\n            marginBottom: '16px',\r\n            textAlign: 'center'\r\n          }}>\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <div style={{ display: 'flex', gap: '12px' }}>\r\n          <button\r\n            onClick={() => {\r\n              stopScanning();\r\n              onClose();\r\n            }}\r\n            style={{\r\n              flex: 1,\r\n              padding: '12px',\r\n              background: 'var(--glass-bg)',\r\n              border: '1px solid var(--glass-border)',\r\n              borderRadius: 'var(--radius-md)',\r\n              color: 'var(--text-primary)',\r\n              fontSize: '16px',\r\n              fontWeight: '600',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            –û—Ç–º–µ–Ω–∞\r\n          </button>\r\n          \r\n          <button\r\n            onClick={() => {\r\n              stopScanning();\r\n              startScanning();\r\n            }}\r\n            style={{\r\n              flex: 1,\r\n              padding: '12px',\r\n              background: 'var(--accent-gradient)',\r\n              border: 'none',\r\n              borderRadius: 'var(--radius-md)',\r\n              color: 'var(--bg-primary)',\r\n              fontSize: '16px',\r\n              fontWeight: '600',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            –ü–æ–≤—Ç–æ—Ä–∏—Ç—å\r\n          </button>\r\n        </div>\r\n\r\n        <div style={{\r\n          marginTop: '16px',\r\n          padding: '12px',\r\n          background: 'var(--glass-bg)',\r\n          borderRadius: 'var(--radius-md)',\r\n          fontSize: '12px',\r\n          color: 'var(--text-muted)',\r\n          textAlign: 'center'\r\n        }}>\r\n          üí° –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É jsQR\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QRScannerModal;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}