{"ast":null,"code":"import axios from 'axios';\nimport { API_BASE_URL } from '../utils/constants';\nimport { authService } from './auth';\n// Базовый API клиент\nclass BaseApiClient {\n  constructor(baseURL = API_BASE_URL) {\n    this.api = axios.create({\n      baseURL,\n      timeout: 10000,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    // Добавляем токен авторизации к каждому запросу\n    this.api.interceptors.request.use(config => {\n      const token = authService.getToken();\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    });\n    // Обрабатываем ошибки авторизации\n    this.api.interceptors.response.use(response => response, error => {\n      if (error.response?.status === 401) {\n        authService.logout();\n      }\n      return Promise.reject(error);\n    });\n  }\n  async handleResponse(response) {\n    if (response.data.success) {\n      return response.data.data;\n    } else {\n      throw new Error(response.data.message || 'API Error');\n    }\n  }\n  async get(url, params) {\n    const response = await this.api.get(url, {\n      params\n    });\n    return this.handleResponse(response);\n  }\n  async post(url, data) {\n    const response = await this.api.post(url, data);\n    return this.handleResponse(response);\n  }\n  async put(url, data) {\n    const response = await this.api.put(url, data);\n    return this.handleResponse(response);\n  }\n  async delete(url) {\n    const response = await this.api.delete(url);\n    return this.handleResponse(response);\n  }\n}\n// API клиент для пользователей\nexport class UserApiClient extends BaseApiClient {\n  // Получить профиль пользователя\n  async getProfile() {\n    return this.get('/user/profile');\n  }\n  // Регистрация пользователя\n  async register(data) {\n    return this.post('/user/register', data);\n  }\n  // Использовать код\n  async useCode(data) {\n    return this.post('/user/use-code', data);\n  }\n  // Проверить код\n  async checkCode(data) {\n    return this.post('/user/check-code', data);\n  }\n  // Получить историю баллов\n  async getPointsHistory(params) {\n    return this.get('/user/points-history', params);\n  }\n  // Получить ежедневный бонус\n  async claimDailyBonus() {\n    return this.post('/user/claim-daily-bonus');\n  }\n  // Получить статистику рефералов\n  async getReferralStats() {\n    return this.get('/user/referral-stats');\n  }\n}\n// API клиент для заведений\nexport class VenueApiClient extends BaseApiClient {\n  // Создать заведение\n  async createVenue(data) {\n    return this.post('/venue/create', data);\n  }\n  // Сгенерировать код\n  async generateCode(data) {\n    return this.post('/venue/generate-code', data);\n  }\n  // Получить информацию о заведении\n  async getVenueInfo(venueCode) {\n    return this.get(`/venue/${venueCode}`);\n  }\n  // Получить баланс заведения\n  async getVenueBalance(venueCode) {\n    return this.get(`/venue/${venueCode}/balance`);\n  }\n  // Получить недельный баланс заведения\n  async getVenueBalanceWeekly(venueCode, params) {\n    return this.get(`/venue/${venueCode}/balance/weekly`, params);\n  }\n  // Получить почасовой баланс заведения\n  async getVenueBalanceHourly(venueCode, params) {\n    return this.get(`/venue/${venueCode}/balance/hourly`, params);\n  }\n  // Получить статистику заведения\n  async getVenueStats(venueCode) {\n    return this.get(`/venue/${venueCode}/stats`);\n  }\n}\n// API клиент для администраторов\nexport class AdminApiClient extends BaseApiClient {\n  // Получить дашборд администратора\n  async getDashboard() {\n    return this.get('/admin/dashboard');\n  }\n  // Получить баланс всех заведений\n  async getVenuesBalance() {\n    return this.get('/admin/venues/balance');\n  }\n  // Получить топ заведений по заработку\n  async getVenuesTopEarners() {\n    return this.get('/admin/venues/top-earners');\n  }\n  // Получить топ пользователей по тратам\n  async getVenuesTopSpenders() {\n    return this.get('/admin/venues/top-spenders');\n  }\n  // Получить сводку транзакций\n  async getTransactionsSummary(params) {\n    return this.get('/admin/transactions/summary', params);\n  }\n}\n// API клиент для меню\nexport class MenuApiClient extends BaseApiClient {\n  // Получить меню заведения\n  async getMenu(venueCode) {\n    return this.get(`/menu/${venueCode}`);\n  }\n  // Покупка товара из меню\n  async purchaseItem(venueCode, itemId, data) {\n    return this.post(`/menu/${venueCode}/item/${itemId}/purchase`, data);\n  }\n}\n// API клиент для заказов\nexport class OrdersApiClient extends BaseApiClient {\n  // Создать заказ\n  async createOrder(data) {\n    return this.post('/orders/create', data);\n  }\n  // Получить мои заказы\n  async getMyOrders(params) {\n    return this.get('/orders/my', params);\n  }\n}\n// API клиент для уведомлений\nexport class NotificationsApiClient extends BaseApiClient {\n  // Получить уведомления\n  async getNotifications(params) {\n    return this.get('/notifications', params);\n  }\n  // Отметить уведомление как прочитанное\n  async markAsRead(data) {\n    return this.post('/notifications/mark-read', data);\n  }\n}\n// Экспортируем singleton instances\nexport const userApi = new UserApiClient();\nexport const venueApi = new VenueApiClient();\nexport const adminApi = new AdminApiClient();\nexport const menuApi = new MenuApiClient();\nexport const ordersApi = new OrdersApiClient();\nexport const notificationsApi = new NotificationsApiClient();","map":{"version":3,"names":["axios","API_BASE_URL","authService","BaseApiClient","constructor","baseURL","api","create","timeout","headers","interceptors","request","use","config","token","getToken","Authorization","response","error","status","logout","Promise","reject","handleResponse","data","success","Error","message","get","url","params","post","put","delete","UserApiClient","getProfile","register","useCode","checkCode","getPointsHistory","claimDailyBonus","getReferralStats","VenueApiClient","createVenue","generateCode","getVenueInfo","venueCode","getVenueBalance","getVenueBalanceWeekly","getVenueBalanceHourly","getVenueStats","AdminApiClient","getDashboard","getVenuesBalance","getVenuesTopEarners","getVenuesTopSpenders","getTransactionsSummary","MenuApiClient","getMenu","purchaseItem","itemId","OrdersApiClient","createOrder","getMyOrders","NotificationsApiClient","getNotifications","markAsRead","userApi","venueApi","adminApi","menuApi","ordersApi","notificationsApi"],"sources":["/home/admnp@delta.sys/Desktops/loyaverse/Loya/shared/dist/services/api-clients.js"],"sourcesContent":["import axios from 'axios';\nimport { API_BASE_URL } from '../utils/constants';\nimport { authService } from './auth';\n// Базовый API клиент\nclass BaseApiClient {\n    constructor(baseURL = API_BASE_URL) {\n        this.api = axios.create({\n            baseURL,\n            timeout: 10000,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        });\n        // Добавляем токен авторизации к каждому запросу\n        this.api.interceptors.request.use((config) => {\n            const token = authService.getToken();\n            if (token) {\n                config.headers.Authorization = `Bearer ${token}`;\n            }\n            return config;\n        });\n        // Обрабатываем ошибки авторизации\n        this.api.interceptors.response.use((response) => response, (error) => {\n            if (error.response?.status === 401) {\n                authService.logout();\n            }\n            return Promise.reject(error);\n        });\n    }\n    async handleResponse(response) {\n        if (response.data.success) {\n            return response.data.data;\n        }\n        else {\n            throw new Error(response.data.message || 'API Error');\n        }\n    }\n    async get(url, params) {\n        const response = await this.api.get(url, { params });\n        return this.handleResponse(response);\n    }\n    async post(url, data) {\n        const response = await this.api.post(url, data);\n        return this.handleResponse(response);\n    }\n    async put(url, data) {\n        const response = await this.api.put(url, data);\n        return this.handleResponse(response);\n    }\n    async delete(url) {\n        const response = await this.api.delete(url);\n        return this.handleResponse(response);\n    }\n}\n// API клиент для пользователей\nexport class UserApiClient extends BaseApiClient {\n    // Получить профиль пользователя\n    async getProfile() {\n        return this.get('/user/profile');\n    }\n    // Регистрация пользователя\n    async register(data) {\n        return this.post('/user/register', data);\n    }\n    // Использовать код\n    async useCode(data) {\n        return this.post('/user/use-code', data);\n    }\n    // Проверить код\n    async checkCode(data) {\n        return this.post('/user/check-code', data);\n    }\n    // Получить историю баллов\n    async getPointsHistory(params) {\n        return this.get('/user/points-history', params);\n    }\n    // Получить ежедневный бонус\n    async claimDailyBonus() {\n        return this.post('/user/claim-daily-bonus');\n    }\n    // Получить статистику рефералов\n    async getReferralStats() {\n        return this.get('/user/referral-stats');\n    }\n}\n// API клиент для заведений\nexport class VenueApiClient extends BaseApiClient {\n    // Создать заведение\n    async createVenue(data) {\n        return this.post('/venue/create', data);\n    }\n    // Сгенерировать код\n    async generateCode(data) {\n        return this.post('/venue/generate-code', data);\n    }\n    // Получить информацию о заведении\n    async getVenueInfo(venueCode) {\n        return this.get(`/venue/${venueCode}`);\n    }\n    // Получить баланс заведения\n    async getVenueBalance(venueCode) {\n        return this.get(`/venue/${venueCode}/balance`);\n    }\n    // Получить недельный баланс заведения\n    async getVenueBalanceWeekly(venueCode, params) {\n        return this.get(`/venue/${venueCode}/balance/weekly`, params);\n    }\n    // Получить почасовой баланс заведения\n    async getVenueBalanceHourly(venueCode, params) {\n        return this.get(`/venue/${venueCode}/balance/hourly`, params);\n    }\n    // Получить статистику заведения\n    async getVenueStats(venueCode) {\n        return this.get(`/venue/${venueCode}/stats`);\n    }\n}\n// API клиент для администраторов\nexport class AdminApiClient extends BaseApiClient {\n    // Получить дашборд администратора\n    async getDashboard() {\n        return this.get('/admin/dashboard');\n    }\n    // Получить баланс всех заведений\n    async getVenuesBalance() {\n        return this.get('/admin/venues/balance');\n    }\n    // Получить топ заведений по заработку\n    async getVenuesTopEarners() {\n        return this.get('/admin/venues/top-earners');\n    }\n    // Получить топ пользователей по тратам\n    async getVenuesTopSpenders() {\n        return this.get('/admin/venues/top-spenders');\n    }\n    // Получить сводку транзакций\n    async getTransactionsSummary(params) {\n        return this.get('/admin/transactions/summary', params);\n    }\n}\n// API клиент для меню\nexport class MenuApiClient extends BaseApiClient {\n    // Получить меню заведения\n    async getMenu(venueCode) {\n        return this.get(`/menu/${venueCode}`);\n    }\n    // Покупка товара из меню\n    async purchaseItem(venueCode, itemId, data) {\n        return this.post(`/menu/${venueCode}/item/${itemId}/purchase`, data);\n    }\n}\n// API клиент для заказов\nexport class OrdersApiClient extends BaseApiClient {\n    // Создать заказ\n    async createOrder(data) {\n        return this.post('/orders/create', data);\n    }\n    // Получить мои заказы\n    async getMyOrders(params) {\n        return this.get('/orders/my', params);\n    }\n}\n// API клиент для уведомлений\nexport class NotificationsApiClient extends BaseApiClient {\n    // Получить уведомления\n    async getNotifications(params) {\n        return this.get('/notifications', params);\n    }\n    // Отметить уведомление как прочитанное\n    async markAsRead(data) {\n        return this.post('/notifications/mark-read', data);\n    }\n}\n// Экспортируем singleton instances\nexport const userApi = new UserApiClient();\nexport const venueApi = new VenueApiClient();\nexport const adminApi = new AdminApiClient();\nexport const menuApi = new MenuApiClient();\nexport const ordersApi = new OrdersApiClient();\nexport const notificationsApi = new NotificationsApiClient();\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,QAAQ,oBAAoB;AACjD,SAASC,WAAW,QAAQ,QAAQ;AACpC;AACA,MAAMC,aAAa,CAAC;EAChBC,WAAWA,CAACC,OAAO,GAAGJ,YAAY,EAAE;IAChC,IAAI,CAACK,GAAG,GAAGN,KAAK,CAACO,MAAM,CAAC;MACpBF,OAAO;MACPG,OAAO,EAAE,KAAK;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB;IACJ,CAAC,CAAC;IACF;IACA,IAAI,CAACH,GAAG,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;MAC1C,MAAMC,KAAK,GAAGZ,WAAW,CAACa,QAAQ,CAAC,CAAC;MACpC,IAAID,KAAK,EAAE;QACPD,MAAM,CAACJ,OAAO,CAACO,aAAa,GAAG,UAAUF,KAAK,EAAE;MACpD;MACA,OAAOD,MAAM;IACjB,CAAC,CAAC;IACF;IACA,IAAI,CAACP,GAAG,CAACI,YAAY,CAACO,QAAQ,CAACL,GAAG,CAAEK,QAAQ,IAAKA,QAAQ,EAAGC,KAAK,IAAK;MAClE,IAAIA,KAAK,CAACD,QAAQ,EAAEE,MAAM,KAAK,GAAG,EAAE;QAChCjB,WAAW,CAACkB,MAAM,CAAC,CAAC;MACxB;MACA,OAAOC,OAAO,CAACC,MAAM,CAACJ,KAAK,CAAC;IAChC,CAAC,CAAC;EACN;EACA,MAAMK,cAAcA,CAACN,QAAQ,EAAE;IAC3B,IAAIA,QAAQ,CAACO,IAAI,CAACC,OAAO,EAAE;MACvB,OAAOR,QAAQ,CAACO,IAAI,CAACA,IAAI;IAC7B,CAAC,MACI;MACD,MAAM,IAAIE,KAAK,CAACT,QAAQ,CAACO,IAAI,CAACG,OAAO,IAAI,WAAW,CAAC;IACzD;EACJ;EACA,MAAMC,GAAGA,CAACC,GAAG,EAAEC,MAAM,EAAE;IACnB,MAAMb,QAAQ,GAAG,MAAM,IAAI,CAACX,GAAG,CAACsB,GAAG,CAACC,GAAG,EAAE;MAAEC;IAAO,CAAC,CAAC;IACpD,OAAO,IAAI,CAACP,cAAc,CAACN,QAAQ,CAAC;EACxC;EACA,MAAMc,IAAIA,CAACF,GAAG,EAAEL,IAAI,EAAE;IAClB,MAAMP,QAAQ,GAAG,MAAM,IAAI,CAACX,GAAG,CAACyB,IAAI,CAACF,GAAG,EAAEL,IAAI,CAAC;IAC/C,OAAO,IAAI,CAACD,cAAc,CAACN,QAAQ,CAAC;EACxC;EACA,MAAMe,GAAGA,CAACH,GAAG,EAAEL,IAAI,EAAE;IACjB,MAAMP,QAAQ,GAAG,MAAM,IAAI,CAACX,GAAG,CAAC0B,GAAG,CAACH,GAAG,EAAEL,IAAI,CAAC;IAC9C,OAAO,IAAI,CAACD,cAAc,CAACN,QAAQ,CAAC;EACxC;EACA,MAAMgB,MAAMA,CAACJ,GAAG,EAAE;IACd,MAAMZ,QAAQ,GAAG,MAAM,IAAI,CAACX,GAAG,CAAC2B,MAAM,CAACJ,GAAG,CAAC;IAC3C,OAAO,IAAI,CAACN,cAAc,CAACN,QAAQ,CAAC;EACxC;AACJ;AACA;AACA,OAAO,MAAMiB,aAAa,SAAS/B,aAAa,CAAC;EAC7C;EACA,MAAMgC,UAAUA,CAAA,EAAG;IACf,OAAO,IAAI,CAACP,GAAG,CAAC,eAAe,CAAC;EACpC;EACA;EACA,MAAMQ,QAAQA,CAACZ,IAAI,EAAE;IACjB,OAAO,IAAI,CAACO,IAAI,CAAC,gBAAgB,EAAEP,IAAI,CAAC;EAC5C;EACA;EACA,MAAMa,OAAOA,CAACb,IAAI,EAAE;IAChB,OAAO,IAAI,CAACO,IAAI,CAAC,gBAAgB,EAAEP,IAAI,CAAC;EAC5C;EACA;EACA,MAAMc,SAASA,CAACd,IAAI,EAAE;IAClB,OAAO,IAAI,CAACO,IAAI,CAAC,kBAAkB,EAAEP,IAAI,CAAC;EAC9C;EACA;EACA,MAAMe,gBAAgBA,CAACT,MAAM,EAAE;IAC3B,OAAO,IAAI,CAACF,GAAG,CAAC,sBAAsB,EAAEE,MAAM,CAAC;EACnD;EACA;EACA,MAAMU,eAAeA,CAAA,EAAG;IACpB,OAAO,IAAI,CAACT,IAAI,CAAC,yBAAyB,CAAC;EAC/C;EACA;EACA,MAAMU,gBAAgBA,CAAA,EAAG;IACrB,OAAO,IAAI,CAACb,GAAG,CAAC,sBAAsB,CAAC;EAC3C;AACJ;AACA;AACA,OAAO,MAAMc,cAAc,SAASvC,aAAa,CAAC;EAC9C;EACA,MAAMwC,WAAWA,CAACnB,IAAI,EAAE;IACpB,OAAO,IAAI,CAACO,IAAI,CAAC,eAAe,EAAEP,IAAI,CAAC;EAC3C;EACA;EACA,MAAMoB,YAAYA,CAACpB,IAAI,EAAE;IACrB,OAAO,IAAI,CAACO,IAAI,CAAC,sBAAsB,EAAEP,IAAI,CAAC;EAClD;EACA;EACA,MAAMqB,YAAYA,CAACC,SAAS,EAAE;IAC1B,OAAO,IAAI,CAAClB,GAAG,CAAC,UAAUkB,SAAS,EAAE,CAAC;EAC1C;EACA;EACA,MAAMC,eAAeA,CAACD,SAAS,EAAE;IAC7B,OAAO,IAAI,CAAClB,GAAG,CAAC,UAAUkB,SAAS,UAAU,CAAC;EAClD;EACA;EACA,MAAME,qBAAqBA,CAACF,SAAS,EAAEhB,MAAM,EAAE;IAC3C,OAAO,IAAI,CAACF,GAAG,CAAC,UAAUkB,SAAS,iBAAiB,EAAEhB,MAAM,CAAC;EACjE;EACA;EACA,MAAMmB,qBAAqBA,CAACH,SAAS,EAAEhB,MAAM,EAAE;IAC3C,OAAO,IAAI,CAACF,GAAG,CAAC,UAAUkB,SAAS,iBAAiB,EAAEhB,MAAM,CAAC;EACjE;EACA;EACA,MAAMoB,aAAaA,CAACJ,SAAS,EAAE;IAC3B,OAAO,IAAI,CAAClB,GAAG,CAAC,UAAUkB,SAAS,QAAQ,CAAC;EAChD;AACJ;AACA;AACA,OAAO,MAAMK,cAAc,SAAShD,aAAa,CAAC;EAC9C;EACA,MAAMiD,YAAYA,CAAA,EAAG;IACjB,OAAO,IAAI,CAACxB,GAAG,CAAC,kBAAkB,CAAC;EACvC;EACA;EACA,MAAMyB,gBAAgBA,CAAA,EAAG;IACrB,OAAO,IAAI,CAACzB,GAAG,CAAC,uBAAuB,CAAC;EAC5C;EACA;EACA,MAAM0B,mBAAmBA,CAAA,EAAG;IACxB,OAAO,IAAI,CAAC1B,GAAG,CAAC,2BAA2B,CAAC;EAChD;EACA;EACA,MAAM2B,oBAAoBA,CAAA,EAAG;IACzB,OAAO,IAAI,CAAC3B,GAAG,CAAC,4BAA4B,CAAC;EACjD;EACA;EACA,MAAM4B,sBAAsBA,CAAC1B,MAAM,EAAE;IACjC,OAAO,IAAI,CAACF,GAAG,CAAC,6BAA6B,EAAEE,MAAM,CAAC;EAC1D;AACJ;AACA;AACA,OAAO,MAAM2B,aAAa,SAAStD,aAAa,CAAC;EAC7C;EACA,MAAMuD,OAAOA,CAACZ,SAAS,EAAE;IACrB,OAAO,IAAI,CAAClB,GAAG,CAAC,SAASkB,SAAS,EAAE,CAAC;EACzC;EACA;EACA,MAAMa,YAAYA,CAACb,SAAS,EAAEc,MAAM,EAAEpC,IAAI,EAAE;IACxC,OAAO,IAAI,CAACO,IAAI,CAAC,SAASe,SAAS,SAASc,MAAM,WAAW,EAAEpC,IAAI,CAAC;EACxE;AACJ;AACA;AACA,OAAO,MAAMqC,eAAe,SAAS1D,aAAa,CAAC;EAC/C;EACA,MAAM2D,WAAWA,CAACtC,IAAI,EAAE;IACpB,OAAO,IAAI,CAACO,IAAI,CAAC,gBAAgB,EAAEP,IAAI,CAAC;EAC5C;EACA;EACA,MAAMuC,WAAWA,CAACjC,MAAM,EAAE;IACtB,OAAO,IAAI,CAACF,GAAG,CAAC,YAAY,EAAEE,MAAM,CAAC;EACzC;AACJ;AACA;AACA,OAAO,MAAMkC,sBAAsB,SAAS7D,aAAa,CAAC;EACtD;EACA,MAAM8D,gBAAgBA,CAACnC,MAAM,EAAE;IAC3B,OAAO,IAAI,CAACF,GAAG,CAAC,gBAAgB,EAAEE,MAAM,CAAC;EAC7C;EACA;EACA,MAAMoC,UAAUA,CAAC1C,IAAI,EAAE;IACnB,OAAO,IAAI,CAACO,IAAI,CAAC,0BAA0B,EAAEP,IAAI,CAAC;EACtD;AACJ;AACA;AACA,OAAO,MAAM2C,OAAO,GAAG,IAAIjC,aAAa,CAAC,CAAC;AAC1C,OAAO,MAAMkC,QAAQ,GAAG,IAAI1B,cAAc,CAAC,CAAC;AAC5C,OAAO,MAAM2B,QAAQ,GAAG,IAAIlB,cAAc,CAAC,CAAC;AAC5C,OAAO,MAAMmB,OAAO,GAAG,IAAIb,aAAa,CAAC,CAAC;AAC1C,OAAO,MAAMc,SAAS,GAAG,IAAIV,eAAe,CAAC,CAAC;AAC9C,OAAO,MAAMW,gBAAgB,GAAG,IAAIR,sBAAsB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}