{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.apiClient = exports.ApiClient = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\n// Базовый API клиент\nclass ApiClient {\n  constructor(baseURL = 'http://localhost:3000/api') {\n    this.baseURL = baseURL;\n    this.client = axios_1.default.create({\n      baseURL: this.baseURL,\n      timeout: 10000,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    // Интерцептор для обработки ответов\n    this.client.interceptors.response.use(response => response, error => {\n      console.error('API Error:', error);\n      return Promise.reject(this.handleError(error));\n    });\n  }\n  // Установка токена авторизации\n  setAuthToken(token) {\n    this.client.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  }\n  // Удаление токена авторизации\n  removeAuthToken() {\n    delete this.client.defaults.headers.common['Authorization'];\n  }\n  // GET запрос\n  async get(url, config) {\n    const response = await this.client.get(url, config);\n    return response.data;\n  }\n  // POST запрос\n  async post(url, data, config) {\n    const response = await this.client.post(url, data, config);\n    return response.data;\n  }\n  // PUT запрос\n  async put(url, data, config) {\n    const response = await this.client.put(url, data, config);\n    return response.data;\n  }\n  // DELETE запрос\n  async delete(url, config) {\n    const response = await this.client.delete(url, config);\n    return response.data;\n  }\n  // Обработка ошибок\n  handleError(error) {\n    if (error.response) {\n      // Сервер ответил с кодом ошибки\n      return {\n        success: false,\n        message: error.response.data?.message || 'Ошибка сервера',\n        details: error.response.data?.details\n      };\n    } else if (error.request) {\n      // Запрос был отправлен, но ответа не получено\n      return {\n        success: false,\n        message: 'Ошибка сети. Проверьте подключение к интернету.'\n      };\n    } else {\n      // Что-то пошло не так при настройке запроса\n      return {\n        success: false,\n        message: error.message || 'Неизвестная ошибка'\n      };\n    }\n  }\n}\nexports.ApiClient = ApiClient;\n// Создание экземпляра API клиента\nexports.apiClient = new ApiClient();\n// Экспорт для использования в других модулях\nexports.default = exports.apiClient;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","apiClient","ApiClient","axios_1","require","constructor","baseURL","client","default","create","timeout","headers","interceptors","response","use","error","console","Promise","reject","handleError","setAuthToken","token","defaults","common","removeAuthToken","get","url","config","data","post","put","delete","success","message","details","request"],"sources":["/home/admnp@delta.sys/Desktops/loyaverse/Loya/shared/dist/services/api.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.apiClient = exports.ApiClient = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\n// Базовый API клиент\nclass ApiClient {\n    constructor(baseURL = 'http://localhost:3000/api') {\n        this.baseURL = baseURL;\n        this.client = axios_1.default.create({\n            baseURL: this.baseURL,\n            timeout: 10000,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        });\n        // Интерцептор для обработки ответов\n        this.client.interceptors.response.use((response) => response, (error) => {\n            console.error('API Error:', error);\n            return Promise.reject(this.handleError(error));\n        });\n    }\n    // Установка токена авторизации\n    setAuthToken(token) {\n        this.client.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    }\n    // Удаление токена авторизации\n    removeAuthToken() {\n        delete this.client.defaults.headers.common['Authorization'];\n    }\n    // GET запрос\n    async get(url, config) {\n        const response = await this.client.get(url, config);\n        return response.data;\n    }\n    // POST запрос\n    async post(url, data, config) {\n        const response = await this.client.post(url, data, config);\n        return response.data;\n    }\n    // PUT запрос\n    async put(url, data, config) {\n        const response = await this.client.put(url, data, config);\n        return response.data;\n    }\n    // DELETE запрос\n    async delete(url, config) {\n        const response = await this.client.delete(url, config);\n        return response.data;\n    }\n    // Обработка ошибок\n    handleError(error) {\n        if (error.response) {\n            // Сервер ответил с кодом ошибки\n            return {\n                success: false,\n                message: error.response.data?.message || 'Ошибка сервера',\n                details: error.response.data?.details,\n            };\n        }\n        else if (error.request) {\n            // Запрос был отправлен, но ответа не получено\n            return {\n                success: false,\n                message: 'Ошибка сети. Проверьте подключение к интернету.',\n            };\n        }\n        else {\n            // Что-то пошло не так при настройке запроса\n            return {\n                success: false,\n                message: error.message || 'Неизвестная ошибка',\n            };\n        }\n    }\n}\nexports.ApiClient = ApiClient;\n// Создание экземпляра API клиента\nexports.apiClient = new ApiClient();\n// Экспорт для использования в других модулях\nexports.default = exports.apiClient;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}