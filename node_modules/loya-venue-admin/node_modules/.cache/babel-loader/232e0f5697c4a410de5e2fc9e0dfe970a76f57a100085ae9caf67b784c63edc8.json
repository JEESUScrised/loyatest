{"ast":null,"code":"import axios from 'axios';\nimport { API_BASE_URL } from '../utils/constants';\nimport { authService } from './auth';\n// Базовый API клиент\nclass BaseApiClient {\n  constructor(baseURL = API_BASE_URL) {\n    this.api = axios.create({\n      baseURL,\n      timeout: 10000,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    // Добавляем токен авторизации к каждому запросу\n    this.api.interceptors.request.use(config => {\n      const token = authService.getToken();\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    });\n    // Обрабатываем ошибки авторизации\n    this.api.interceptors.response.use(response => response, error => {\n      var _a;\n      if (((_a = error.response) === null || _a === void 0 ? void 0 : _a.status) === 401) {\n        authService.logout();\n      }\n      return Promise.reject(error);\n    });\n  }\n  async handleResponse(response) {\n    if (response.data.success) {\n      return response.data.data;\n    } else {\n      throw new Error(response.data.message || 'API Error');\n    }\n  }\n  async get(url, params) {\n    const response = await this.api.get(url, {\n      params\n    });\n    return this.handleResponse(response);\n  }\n  async post(url, data) {\n    const response = await this.api.post(url, data);\n    return this.handleResponse(response);\n  }\n  async put(url, data) {\n    const response = await this.api.put(url, data);\n    return this.handleResponse(response);\n  }\n  async delete(url) {\n    const response = await this.api.delete(url);\n    return this.handleResponse(response);\n  }\n}\n// API клиент для пользователей\nexport class UserApiClient extends BaseApiClient {\n  // Получить профиль пользователя\n  async getProfile() {\n    return this.get('/user/profile');\n  }\n  // Регистрация пользователя\n  async register(data) {\n    return this.post('/user/register', data);\n  }\n  // Использовать код\n  async useCode(data) {\n    return this.post('/user/use-code', data);\n  }\n  // Проверить код\n  async checkCode(data) {\n    return this.post('/user/check-code', data);\n  }\n  // Получить историю баллов\n  async getPointsHistory(params) {\n    return this.get('/user/points-history', params);\n  }\n  // Получить ежедневный бонус\n  async claimDailyBonus() {\n    return this.post('/user/claim-daily-bonus');\n  }\n  // Получить статистику рефералов\n  async getReferralStats() {\n    return this.get('/user/referral-stats');\n  }\n}\n// API клиент для заведений\nexport class VenueApiClient extends BaseApiClient {\n  // Создать заведение\n  async createVenue(data) {\n    return this.post('/venue/create', data);\n  }\n  // Сгенерировать код\n  async generateCode(data) {\n    return this.post('/venue/generate-code', data);\n  }\n  // Получить информацию о заведении\n  async getVenueInfo(venueCode) {\n    return this.get(`/venue/${venueCode}`);\n  }\n  // Получить баланс заведения\n  async getVenueBalance(venueCode) {\n    return this.get(`/venue/${venueCode}/balance`);\n  }\n  // Получить недельный баланс заведения\n  async getVenueBalanceWeekly(venueCode, params) {\n    return this.get(`/venue/${venueCode}/balance/weekly`, params);\n  }\n  // Получить почасовой баланс заведения\n  async getVenueBalanceHourly(venueCode, params) {\n    return this.get(`/venue/${venueCode}/balance/hourly`, params);\n  }\n  // Получить статистику заведения\n  async getVenueStats(venueCode) {\n    return this.get(`/venue/${venueCode}/stats`);\n  }\n}\n// API клиент для администраторов\nexport class AdminApiClient extends BaseApiClient {\n  // Получить дашборд администратора\n  async getDashboard() {\n    return this.get('/admin/dashboard');\n  }\n  // Получить баланс всех заведений\n  async getVenuesBalance() {\n    return this.get('/admin/venues/balance');\n  }\n  // Получить топ заведений по заработку\n  async getVenuesTopEarners() {\n    return this.get('/admin/venues/top-earners');\n  }\n  // Получить топ пользователей по тратам\n  async getVenuesTopSpenders() {\n    return this.get('/admin/venues/top-spenders');\n  }\n  // Получить сводку транзакций\n  async getTransactionsSummary(params) {\n    return this.get('/admin/transactions/summary', params);\n  }\n}\n// API клиент для меню\nexport class MenuApiClient extends BaseApiClient {\n  // Получить меню заведения\n  async getMenu(venueCode) {\n    return this.get(`/menu/${venueCode}`);\n  }\n  // Покупка товара из меню\n  async purchaseItem(venueCode, itemId, data) {\n    return this.post(`/menu/${venueCode}/item/${itemId}/purchase`, data);\n  }\n}\n// API клиент для заказов\nexport class OrdersApiClient extends BaseApiClient {\n  // Создать заказ\n  async createOrder(data) {\n    return this.post('/orders/create', data);\n  }\n  // Получить мои заказы\n  async getMyOrders(params) {\n    return this.get('/orders/my', params);\n  }\n}\n// API клиент для уведомлений\nexport class NotificationsApiClient extends BaseApiClient {\n  // Получить уведомления\n  async getNotifications(params) {\n    return this.get('/notifications', params);\n  }\n  // Отметить уведомление как прочитанное\n  async markAsRead(data) {\n    return this.post('/notifications/mark-read', data);\n  }\n}\n// Экспортируем singleton instances\nexport const userApi = new UserApiClient();\nexport const venueApi = new VenueApiClient();\nexport const adminApi = new AdminApiClient();\nexport const menuApi = new MenuApiClient();\nexport const ordersApi = new OrdersApiClient();\nexport const notificationsApi = new NotificationsApiClient();","map":{"version":3,"names":["axios","API_BASE_URL","authService","BaseApiClient","constructor","baseURL","api","create","timeout","headers","interceptors","request","use","config","token","getToken","Authorization","response","error","_a","status","logout","Promise","reject","handleResponse","data","success","Error","message","get","url","params","post","put","delete","UserApiClient","getProfile","register","useCode","checkCode","getPointsHistory","claimDailyBonus","getReferralStats","VenueApiClient","createVenue","generateCode","getVenueInfo","venueCode","getVenueBalance","getVenueBalanceWeekly","getVenueBalanceHourly","getVenueStats","AdminApiClient","getDashboard","getVenuesBalance","getVenuesTopEarners","getVenuesTopSpenders","getTransactionsSummary","MenuApiClient","getMenu","purchaseItem","itemId","OrdersApiClient","createOrder","getMyOrders","NotificationsApiClient","getNotifications","markAsRead","userApi","venueApi","adminApi","menuApi","ordersApi","notificationsApi"],"sources":["C:/Users/user/Desktop/loyaverse/Loya/shared/dist/services/api-clients.js"],"sourcesContent":["import axios from 'axios';\r\nimport { API_BASE_URL } from '../utils/constants';\r\nimport { authService } from './auth';\r\n// Базовый API клиент\r\nclass BaseApiClient {\r\n    constructor(baseURL = API_BASE_URL) {\r\n        this.api = axios.create({\r\n            baseURL,\r\n            timeout: 10000,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        });\r\n        // Добавляем токен авторизации к каждому запросу\r\n        this.api.interceptors.request.use((config) => {\r\n            const token = authService.getToken();\r\n            if (token) {\r\n                config.headers.Authorization = `Bearer ${token}`;\r\n            }\r\n            return config;\r\n        });\r\n        // Обрабатываем ошибки авторизации\r\n        this.api.interceptors.response.use((response) => response, (error) => {\r\n            var _a;\r\n            if (((_a = error.response) === null || _a === void 0 ? void 0 : _a.status) === 401) {\r\n                authService.logout();\r\n            }\r\n            return Promise.reject(error);\r\n        });\r\n    }\r\n    async handleResponse(response) {\r\n        if (response.data.success) {\r\n            return response.data.data;\r\n        }\r\n        else {\r\n            throw new Error(response.data.message || 'API Error');\r\n        }\r\n    }\r\n    async get(url, params) {\r\n        const response = await this.api.get(url, { params });\r\n        return this.handleResponse(response);\r\n    }\r\n    async post(url, data) {\r\n        const response = await this.api.post(url, data);\r\n        return this.handleResponse(response);\r\n    }\r\n    async put(url, data) {\r\n        const response = await this.api.put(url, data);\r\n        return this.handleResponse(response);\r\n    }\r\n    async delete(url) {\r\n        const response = await this.api.delete(url);\r\n        return this.handleResponse(response);\r\n    }\r\n}\r\n// API клиент для пользователей\r\nexport class UserApiClient extends BaseApiClient {\r\n    // Получить профиль пользователя\r\n    async getProfile() {\r\n        return this.get('/user/profile');\r\n    }\r\n    // Регистрация пользователя\r\n    async register(data) {\r\n        return this.post('/user/register', data);\r\n    }\r\n    // Использовать код\r\n    async useCode(data) {\r\n        return this.post('/user/use-code', data);\r\n    }\r\n    // Проверить код\r\n    async checkCode(data) {\r\n        return this.post('/user/check-code', data);\r\n    }\r\n    // Получить историю баллов\r\n    async getPointsHistory(params) {\r\n        return this.get('/user/points-history', params);\r\n    }\r\n    // Получить ежедневный бонус\r\n    async claimDailyBonus() {\r\n        return this.post('/user/claim-daily-bonus');\r\n    }\r\n    // Получить статистику рефералов\r\n    async getReferralStats() {\r\n        return this.get('/user/referral-stats');\r\n    }\r\n}\r\n// API клиент для заведений\r\nexport class VenueApiClient extends BaseApiClient {\r\n    // Создать заведение\r\n    async createVenue(data) {\r\n        return this.post('/venue/create', data);\r\n    }\r\n    // Сгенерировать код\r\n    async generateCode(data) {\r\n        return this.post('/venue/generate-code', data);\r\n    }\r\n    // Получить информацию о заведении\r\n    async getVenueInfo(venueCode) {\r\n        return this.get(`/venue/${venueCode}`);\r\n    }\r\n    // Получить баланс заведения\r\n    async getVenueBalance(venueCode) {\r\n        return this.get(`/venue/${venueCode}/balance`);\r\n    }\r\n    // Получить недельный баланс заведения\r\n    async getVenueBalanceWeekly(venueCode, params) {\r\n        return this.get(`/venue/${venueCode}/balance/weekly`, params);\r\n    }\r\n    // Получить почасовой баланс заведения\r\n    async getVenueBalanceHourly(venueCode, params) {\r\n        return this.get(`/venue/${venueCode}/balance/hourly`, params);\r\n    }\r\n    // Получить статистику заведения\r\n    async getVenueStats(venueCode) {\r\n        return this.get(`/venue/${venueCode}/stats`);\r\n    }\r\n}\r\n// API клиент для администраторов\r\nexport class AdminApiClient extends BaseApiClient {\r\n    // Получить дашборд администратора\r\n    async getDashboard() {\r\n        return this.get('/admin/dashboard');\r\n    }\r\n    // Получить баланс всех заведений\r\n    async getVenuesBalance() {\r\n        return this.get('/admin/venues/balance');\r\n    }\r\n    // Получить топ заведений по заработку\r\n    async getVenuesTopEarners() {\r\n        return this.get('/admin/venues/top-earners');\r\n    }\r\n    // Получить топ пользователей по тратам\r\n    async getVenuesTopSpenders() {\r\n        return this.get('/admin/venues/top-spenders');\r\n    }\r\n    // Получить сводку транзакций\r\n    async getTransactionsSummary(params) {\r\n        return this.get('/admin/transactions/summary', params);\r\n    }\r\n}\r\n// API клиент для меню\r\nexport class MenuApiClient extends BaseApiClient {\r\n    // Получить меню заведения\r\n    async getMenu(venueCode) {\r\n        return this.get(`/menu/${venueCode}`);\r\n    }\r\n    // Покупка товара из меню\r\n    async purchaseItem(venueCode, itemId, data) {\r\n        return this.post(`/menu/${venueCode}/item/${itemId}/purchase`, data);\r\n    }\r\n}\r\n// API клиент для заказов\r\nexport class OrdersApiClient extends BaseApiClient {\r\n    // Создать заказ\r\n    async createOrder(data) {\r\n        return this.post('/orders/create', data);\r\n    }\r\n    // Получить мои заказы\r\n    async getMyOrders(params) {\r\n        return this.get('/orders/my', params);\r\n    }\r\n}\r\n// API клиент для уведомлений\r\nexport class NotificationsApiClient extends BaseApiClient {\r\n    // Получить уведомления\r\n    async getNotifications(params) {\r\n        return this.get('/notifications', params);\r\n    }\r\n    // Отметить уведомление как прочитанное\r\n    async markAsRead(data) {\r\n        return this.post('/notifications/mark-read', data);\r\n    }\r\n}\r\n// Экспортируем singleton instances\r\nexport const userApi = new UserApiClient();\r\nexport const venueApi = new VenueApiClient();\r\nexport const adminApi = new AdminApiClient();\r\nexport const menuApi = new MenuApiClient();\r\nexport const ordersApi = new OrdersApiClient();\r\nexport const notificationsApi = new NotificationsApiClient();\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,QAAQ,oBAAoB;AACjD,SAASC,WAAW,QAAQ,QAAQ;AACpC;AACA,MAAMC,aAAa,CAAC;EAChBC,WAAWA,CAACC,OAAO,GAAGJ,YAAY,EAAE;IAChC,IAAI,CAACK,GAAG,GAAGN,KAAK,CAACO,MAAM,CAAC;MACpBF,OAAO;MACPG,OAAO,EAAE,KAAK;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB;IACJ,CAAC,CAAC;IACF;IACA,IAAI,CAACH,GAAG,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;MAC1C,MAAMC,KAAK,GAAGZ,WAAW,CAACa,QAAQ,CAAC,CAAC;MACpC,IAAID,KAAK,EAAE;QACPD,MAAM,CAACJ,OAAO,CAACO,aAAa,GAAG,UAAUF,KAAK,EAAE;MACpD;MACA,OAAOD,MAAM;IACjB,CAAC,CAAC;IACF;IACA,IAAI,CAACP,GAAG,CAACI,YAAY,CAACO,QAAQ,CAACL,GAAG,CAAEK,QAAQ,IAAKA,QAAQ,EAAGC,KAAK,IAAK;MAClE,IAAIC,EAAE;MACN,IAAI,CAAC,CAACA,EAAE,GAAGD,KAAK,CAACD,QAAQ,MAAM,IAAI,IAAIE,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACC,MAAM,MAAM,GAAG,EAAE;QAChFlB,WAAW,CAACmB,MAAM,CAAC,CAAC;MACxB;MACA,OAAOC,OAAO,CAACC,MAAM,CAACL,KAAK,CAAC;IAChC,CAAC,CAAC;EACN;EACA,MAAMM,cAAcA,CAACP,QAAQ,EAAE;IAC3B,IAAIA,QAAQ,CAACQ,IAAI,CAACC,OAAO,EAAE;MACvB,OAAOT,QAAQ,CAACQ,IAAI,CAACA,IAAI;IAC7B,CAAC,MACI;MACD,MAAM,IAAIE,KAAK,CAACV,QAAQ,CAACQ,IAAI,CAACG,OAAO,IAAI,WAAW,CAAC;IACzD;EACJ;EACA,MAAMC,GAAGA,CAACC,GAAG,EAAEC,MAAM,EAAE;IACnB,MAAMd,QAAQ,GAAG,MAAM,IAAI,CAACX,GAAG,CAACuB,GAAG,CAACC,GAAG,EAAE;MAAEC;IAAO,CAAC,CAAC;IACpD,OAAO,IAAI,CAACP,cAAc,CAACP,QAAQ,CAAC;EACxC;EACA,MAAMe,IAAIA,CAACF,GAAG,EAAEL,IAAI,EAAE;IAClB,MAAMR,QAAQ,GAAG,MAAM,IAAI,CAACX,GAAG,CAAC0B,IAAI,CAACF,GAAG,EAAEL,IAAI,CAAC;IAC/C,OAAO,IAAI,CAACD,cAAc,CAACP,QAAQ,CAAC;EACxC;EACA,MAAMgB,GAAGA,CAACH,GAAG,EAAEL,IAAI,EAAE;IACjB,MAAMR,QAAQ,GAAG,MAAM,IAAI,CAACX,GAAG,CAAC2B,GAAG,CAACH,GAAG,EAAEL,IAAI,CAAC;IAC9C,OAAO,IAAI,CAACD,cAAc,CAACP,QAAQ,CAAC;EACxC;EACA,MAAMiB,MAAMA,CAACJ,GAAG,EAAE;IACd,MAAMb,QAAQ,GAAG,MAAM,IAAI,CAACX,GAAG,CAAC4B,MAAM,CAACJ,GAAG,CAAC;IAC3C,OAAO,IAAI,CAACN,cAAc,CAACP,QAAQ,CAAC;EACxC;AACJ;AACA;AACA,OAAO,MAAMkB,aAAa,SAAShC,aAAa,CAAC;EAC7C;EACA,MAAMiC,UAAUA,CAAA,EAAG;IACf,OAAO,IAAI,CAACP,GAAG,CAAC,eAAe,CAAC;EACpC;EACA;EACA,MAAMQ,QAAQA,CAACZ,IAAI,EAAE;IACjB,OAAO,IAAI,CAACO,IAAI,CAAC,gBAAgB,EAAEP,IAAI,CAAC;EAC5C;EACA;EACA,MAAMa,OAAOA,CAACb,IAAI,EAAE;IAChB,OAAO,IAAI,CAACO,IAAI,CAAC,gBAAgB,EAAEP,IAAI,CAAC;EAC5C;EACA;EACA,MAAMc,SAASA,CAACd,IAAI,EAAE;IAClB,OAAO,IAAI,CAACO,IAAI,CAAC,kBAAkB,EAAEP,IAAI,CAAC;EAC9C;EACA;EACA,MAAMe,gBAAgBA,CAACT,MAAM,EAAE;IAC3B,OAAO,IAAI,CAACF,GAAG,CAAC,sBAAsB,EAAEE,MAAM,CAAC;EACnD;EACA;EACA,MAAMU,eAAeA,CAAA,EAAG;IACpB,OAAO,IAAI,CAACT,IAAI,CAAC,yBAAyB,CAAC;EAC/C;EACA;EACA,MAAMU,gBAAgBA,CAAA,EAAG;IACrB,OAAO,IAAI,CAACb,GAAG,CAAC,sBAAsB,CAAC;EAC3C;AACJ;AACA;AACA,OAAO,MAAMc,cAAc,SAASxC,aAAa,CAAC;EAC9C;EACA,MAAMyC,WAAWA,CAACnB,IAAI,EAAE;IACpB,OAAO,IAAI,CAACO,IAAI,CAAC,eAAe,EAAEP,IAAI,CAAC;EAC3C;EACA;EACA,MAAMoB,YAAYA,CAACpB,IAAI,EAAE;IACrB,OAAO,IAAI,CAACO,IAAI,CAAC,sBAAsB,EAAEP,IAAI,CAAC;EAClD;EACA;EACA,MAAMqB,YAAYA,CAACC,SAAS,EAAE;IAC1B,OAAO,IAAI,CAAClB,GAAG,CAAC,UAAUkB,SAAS,EAAE,CAAC;EAC1C;EACA;EACA,MAAMC,eAAeA,CAACD,SAAS,EAAE;IAC7B,OAAO,IAAI,CAAClB,GAAG,CAAC,UAAUkB,SAAS,UAAU,CAAC;EAClD;EACA;EACA,MAAME,qBAAqBA,CAACF,SAAS,EAAEhB,MAAM,EAAE;IAC3C,OAAO,IAAI,CAACF,GAAG,CAAC,UAAUkB,SAAS,iBAAiB,EAAEhB,MAAM,CAAC;EACjE;EACA;EACA,MAAMmB,qBAAqBA,CAACH,SAAS,EAAEhB,MAAM,EAAE;IAC3C,OAAO,IAAI,CAACF,GAAG,CAAC,UAAUkB,SAAS,iBAAiB,EAAEhB,MAAM,CAAC;EACjE;EACA;EACA,MAAMoB,aAAaA,CAACJ,SAAS,EAAE;IAC3B,OAAO,IAAI,CAAClB,GAAG,CAAC,UAAUkB,SAAS,QAAQ,CAAC;EAChD;AACJ;AACA;AACA,OAAO,MAAMK,cAAc,SAASjD,aAAa,CAAC;EAC9C;EACA,MAAMkD,YAAYA,CAAA,EAAG;IACjB,OAAO,IAAI,CAACxB,GAAG,CAAC,kBAAkB,CAAC;EACvC;EACA;EACA,MAAMyB,gBAAgBA,CAAA,EAAG;IACrB,OAAO,IAAI,CAACzB,GAAG,CAAC,uBAAuB,CAAC;EAC5C;EACA;EACA,MAAM0B,mBAAmBA,CAAA,EAAG;IACxB,OAAO,IAAI,CAAC1B,GAAG,CAAC,2BAA2B,CAAC;EAChD;EACA;EACA,MAAM2B,oBAAoBA,CAAA,EAAG;IACzB,OAAO,IAAI,CAAC3B,GAAG,CAAC,4BAA4B,CAAC;EACjD;EACA;EACA,MAAM4B,sBAAsBA,CAAC1B,MAAM,EAAE;IACjC,OAAO,IAAI,CAACF,GAAG,CAAC,6BAA6B,EAAEE,MAAM,CAAC;EAC1D;AACJ;AACA;AACA,OAAO,MAAM2B,aAAa,SAASvD,aAAa,CAAC;EAC7C;EACA,MAAMwD,OAAOA,CAACZ,SAAS,EAAE;IACrB,OAAO,IAAI,CAAClB,GAAG,CAAC,SAASkB,SAAS,EAAE,CAAC;EACzC;EACA;EACA,MAAMa,YAAYA,CAACb,SAAS,EAAEc,MAAM,EAAEpC,IAAI,EAAE;IACxC,OAAO,IAAI,CAACO,IAAI,CAAC,SAASe,SAAS,SAASc,MAAM,WAAW,EAAEpC,IAAI,CAAC;EACxE;AACJ;AACA;AACA,OAAO,MAAMqC,eAAe,SAAS3D,aAAa,CAAC;EAC/C;EACA,MAAM4D,WAAWA,CAACtC,IAAI,EAAE;IACpB,OAAO,IAAI,CAACO,IAAI,CAAC,gBAAgB,EAAEP,IAAI,CAAC;EAC5C;EACA;EACA,MAAMuC,WAAWA,CAACjC,MAAM,EAAE;IACtB,OAAO,IAAI,CAACF,GAAG,CAAC,YAAY,EAAEE,MAAM,CAAC;EACzC;AACJ;AACA;AACA,OAAO,MAAMkC,sBAAsB,SAAS9D,aAAa,CAAC;EACtD;EACA,MAAM+D,gBAAgBA,CAACnC,MAAM,EAAE;IAC3B,OAAO,IAAI,CAACF,GAAG,CAAC,gBAAgB,EAAEE,MAAM,CAAC;EAC7C;EACA;EACA,MAAMoC,UAAUA,CAAC1C,IAAI,EAAE;IACnB,OAAO,IAAI,CAACO,IAAI,CAAC,0BAA0B,EAAEP,IAAI,CAAC;EACtD;AACJ;AACA;AACA,OAAO,MAAM2C,OAAO,GAAG,IAAIjC,aAAa,CAAC,CAAC;AAC1C,OAAO,MAAMkC,QAAQ,GAAG,IAAI1B,cAAc,CAAC,CAAC;AAC5C,OAAO,MAAM2B,QAAQ,GAAG,IAAIlB,cAAc,CAAC,CAAC;AAC5C,OAAO,MAAMmB,OAAO,GAAG,IAAIb,aAAa,CAAC,CAAC;AAC1C,OAAO,MAAMc,SAAS,GAAG,IAAIV,eAAe,CAAC,CAAC;AAC9C,OAAO,MAAMW,gBAAgB,GAAG,IAAIR,sBAAsB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}