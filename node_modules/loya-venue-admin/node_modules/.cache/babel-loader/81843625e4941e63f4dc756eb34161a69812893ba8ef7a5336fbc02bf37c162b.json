{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\loyaverse\\\\Loya\\\\frontends\\\\venue-admin\\\\src\\\\components\\\\common\\\\ProtectedRoute.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport LoadingSpinner from './LoadingSpinner';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  requiredRole,\n  fallback\n}) => {\n  _s();\n  const {\n    isAuthenticated,\n    isLoading,\n    user,\n    hasRole\n  } = useAuth();\n\n  // Показываем загрузку\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Если не авторизован\n  if (!isAuthenticated || !user) {\n    return fallback || /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen bg-purple-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold mb-2 text-purple-800\",\n          children: \"\\u0422\\u0440\\u0435\\u0431\\u0443\\u0435\\u0442\\u0441\\u044F \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-purple-600\",\n          children: \"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435 \\u0432 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Если требуется определенная роль\n  if (requiredRole && !hasRole(requiredRole)) {\n    return fallback || /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen bg-purple-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold mb-2 text-purple-800\",\n          children: \"\\u041D\\u0435\\u0434\\u043E\\u0441\\u0442\\u0430\\u0442\\u043E\\u0447\\u043D\\u043E \\u043F\\u0440\\u0430\\u0432\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-purple-600\",\n          children: \"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u0442 \\u043F\\u0440\\u0430\\u0432 \\u0434\\u043B\\u044F \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u0430 \\u043A \\u044D\\u0442\\u043E\\u0439 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: children\n  }, void 0, false);\n};\n_s(ProtectedRoute, \"ZBl2VXHz0yNlb2hTKyEJxt8tR24=\", false, function () {\n  return [useAuth];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","useAuth","LoadingSpinner","jsxDEV","_jsxDEV","Fragment","_Fragment","ProtectedRoute","children","requiredRole","fallback","_s","isAuthenticated","isLoading","user","hasRole","fileName","_jsxFileName","lineNumber","columnNumber","className","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/loyaverse/Loya/frontends/venue-admin/src/components/common/ProtectedRoute.tsx"],"sourcesContent":["import React, { ReactNode } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { UserRole } from 'loya-shared';\nimport LoadingSpinner from './LoadingSpinner';\nimport LoginForm from '../auth/LoginForm';\n\ninterface ProtectedRouteProps {\n  children: ReactNode;\n  requiredRole?: UserRole;\n  fallback?: ReactNode;\n}\n\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ \n  children, \n  requiredRole, \n  fallback \n}) => {\n  const { isAuthenticated, isLoading, user, hasRole } = useAuth();\n\n  // Показываем загрузку\n  if (isLoading) {\n    return <LoadingSpinner /> as React.ReactElement;\n  }\n\n  // Если не авторизован\n  if (!isAuthenticated || !user) {\n    return (fallback || (\n      <div className=\"flex items-center justify-center min-h-screen bg-purple-50\">\n        <div className=\"text-center\">\n          <h2 className=\"text-xl font-semibold mb-2 text-purple-800\">Требуется авторизация</h2>\n          <p className=\"text-purple-600\">Пожалуйста, войдите в систему</p>\n        </div>\n      </div>\n    )) as React.ReactElement;\n  }\n\n  // Если требуется определенная роль\n  if (requiredRole && !hasRole(requiredRole)) {\n    return (fallback || (\n      <div className=\"flex items-center justify-center min-h-screen bg-purple-50\">\n        <div className=\"text-center\">\n          <h2 className=\"text-xl font-semibold mb-2 text-purple-800\">Недостаточно прав</h2>\n          <p className=\"text-purple-600\">\n            У вас нет прав для доступа к этой странице\n          </p>\n        </div>\n      </div>\n    )) as React.ReactElement;\n  }\n\n  return <>{children}</> as React.ReactElement;\n};\n\nexport default ProtectedRoute;\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAqB,OAAO;AACxC,SAASC,OAAO,QAAQ,4BAA4B;AAEpD,OAAOC,cAAc,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAS9C,MAAMC,cAA6C,GAAGA,CAAC;EACrDC,QAAQ;EACRC,YAAY;EACZC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAM;IAAEC,eAAe;IAAEC,SAAS;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGd,OAAO,CAAC,CAAC;;EAE/D;EACA,IAAIY,SAAS,EAAE;IACb,oBAAOT,OAAA,CAACF,cAAc;MAAAc,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC3B;;EAEA;EACA,IAAI,CAACP,eAAe,IAAI,CAACE,IAAI,EAAE;IAC7B,OAAQJ,QAAQ,iBACdN,OAAA;MAAKgB,SAAS,EAAC,4DAA4D;MAAAZ,QAAA,eACzEJ,OAAA;QAAKgB,SAAS,EAAC,aAAa;QAAAZ,QAAA,gBAC1BJ,OAAA;UAAIgB,SAAS,EAAC,4CAA4C;UAAAZ,QAAA,EAAC;QAAqB;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACrFf,OAAA;UAAGgB,SAAS,EAAC,iBAAiB;UAAAZ,QAAA,EAAC;QAA6B;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7D;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EACH;;EAEA;EACA,IAAIV,YAAY,IAAI,CAACM,OAAO,CAACN,YAAY,CAAC,EAAE;IAC1C,OAAQC,QAAQ,iBACdN,OAAA;MAAKgB,SAAS,EAAC,4DAA4D;MAAAZ,QAAA,eACzEJ,OAAA;QAAKgB,SAAS,EAAC,aAAa;QAAAZ,QAAA,gBAC1BJ,OAAA;UAAIgB,SAAS,EAAC,4CAA4C;UAAAZ,QAAA,EAAC;QAAiB;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACjFf,OAAA;UAAGgB,SAAS,EAAC,iBAAiB;UAAAZ,QAAA,EAAC;QAE/B;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EACH;EAEA,oBAAOf,OAAA,CAAAE,SAAA;IAAAE,QAAA,EAAGA;EAAQ,gBAAG,CAAC;AACxB,CAAC;AAACG,EAAA,CAvCIJ,cAA6C;EAAA,QAKKN,OAAO;AAAA;AAAAoB,EAAA,GALzDd,cAA6C;AAyCnD,eAAeA,cAAc;AAAC,IAAAc,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}